<input type="number" value="@Value" @onchange="Send" @oninput="OnInput" @onkeydown="@OnKeydown" @onkeydown:preventDefault="@PreventKey" disabled="@Disabled" />

@code {
    [Parameter]
    public int Value { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public EventCallback<int> ValueChanged { get; set; }

    private bool PreventKey { get; set; }

    private void OnKeydown(KeyboardEventArgs args)
    {
        this.PreventKey = false;
        if (args.Code == "Tab" || args.Code == "Backspace" || args.Code == "Enter")
        {
            return;
        }

        if (!int.TryParse(Value.ToString() + args.Key, out var value) || value < 0)
        {
            this.PreventKey = true;
        }
    }

    private void OnInput(ChangeEventArgs e)
    {
        var newValue = e?.Value?.ToString();
        Value = int.Parse(string.IsNullOrWhiteSpace(newValue) ? "0" : newValue);
    }

    private async Task Send()
    {
        await ValueChanged.InvokeAsync(Value);
    }
}
